# 截止日期 I/O 调度程序可调参数

==============================

这个小文件试图记录截止日期 I/O 调度程序的工作方式。特别是，它将阐明对高级用户可能感兴趣的公开可调参数的含义。

选择 I/O 调度程序

-----------------------

有关在每个设备基础上选择 I/O 调度程序的信息，请参阅 Documentation/block/switching-sched.txt。

********************************************************************************

read_expire（以毫秒为单位）

-----------

截止日期 I/O 调度程序的目标是尝试保证请求的开始服务时间。由于我们主要关注读取延迟，因此此参数是可调的。当读取请求首次进入 I/O 调度程序时，会为其分配一个截止日期，该截止日期是当前时间加上以毫秒为单位的 read_expire 值。

write_expire（以毫秒为单位）

-----------

与上述 read_expire 类似，但适用于写入。

fifo_batch（请求数量）

----------

请求被分组为特定数据方向（读取或写入）的“批次”，这些批次按照扇区递增顺序提供服务。为了限制额外的寻道，仅在批次之间检查截止日期到期情况。fifo_batch 控制每个批次的最大请求数量。

此参数调整每个请求的延迟和聚合吞吐量之间的平衡。当主要关注低延迟时，较小的值更好（值为 1 时产生先到先服务行为）。增加 fifo_batch 通常会提高吞吐量，但会以延迟变化为代价。

writes_starved（调度次数）

--------------

当我们必须将请求从 I/O 调度程序队列移动到块设备调度队列时，我们总是优先考虑读取。然而，我们也不想无限期地饿死写入。因此，writes_starved 控制我们在读取优先于写入之前给予读取的偏好次数。当达到 writes_starved 次数时，我们根据与读取相同的标准调度一些写入。

front_merges（布尔值）

------------

有时会发生这样的情况，即一个请求进入 I/O 调度程序，该请求与已经在队列中的请求相邻。它要么适合该请求的末尾，要么适合开头。这称为后端合并候选或前端合并候选。由于文件的典型布局方式，后端合并比前端合并常见得多。对于某些工作负载，您甚至可能知道花费任何时间尝试前端合并请求是浪费时间。将 front_merges 设置为 0 会禁用此功能。由于缓存的 last_merge 提示，前端合并仍可能发生，但由于这基本上没有成本，我们将其保留。当调用 I/O 调度程序合并函数时，我们只是禁用 rbtree 前端扇区查找。

2002 年 11 月 11 日，Jens Axboe <jens.axboe@oracle.com>