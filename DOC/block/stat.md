`Block layer statistics in /sys/block/<dev>/stat`

===============================================

此文件记录了`/sys/block/<dev>/stat`文件的内容。`stat`文件提供了关于块设备`<dev>`状态的几个统计信息。

问：为什么在单个文件中有多个统计信息？系统文件系统通常不是每个文件包含一个值吗？

答：通过拥有一个文件，内核可以保证这些统计信息代表设备状态的一致快照。如果将统计信息导出为多个包含单个统计信息的文件，就无法保证一组读取值代表一个时间点。

`stat`文件由一行文本组成，包含 11 个用空格分隔的十进制值。这些字段在下表中进行了总结，并在下面进行了更详细的描述。


|名称|单位|描述|
|----|-----|-----------|
|读取 I/O|请求|处理的读取 I/O 数量|
|读取合并|请求|与队列中 I/O 合并的读取 I/O 数量|
|读取扇区|扇区|读取的扇区数量|
|读取时间|毫秒|读取请求的总等待时间|
|写入 I/O|请求|处理的写入 I/O 数量|
|写入合并|请求|与队列中 I/O 合并的写入 I/O 数量|
|写入扇区|扇区|写入的扇区数量|
|写入时间|毫秒|写入请求的总等待时间|
|正在进行|请求|当前正在进行的 I/O 数量|
|I/O 时间|毫秒|此块设备处于活动状态的总时间|
|队列时间|毫秒|所有请求的总等待时间|


读取 I/O、写入 I/O

=====================

这些值在 I/O 请求完成时递增。

读取合并、写入合并

=========================

这些值在 I/O 请求与已经排队的 I/O 请求合并时递增。

读取扇区、写入扇区

===========================

这些值计算从或写入此块设备的扇区数量。这里的“扇区”是标准的 UNIX 512 字节扇区，而不是任何设备或文件系统特定的块大小。计数器在 I/O 完成时递增。

读取时间、写入时间

=======================

这些值计算 I/O 请求在该块设备上等待的毫秒数。如果有多个 I/O 请求在等待，这些值将以大于 1000/秒的速率增加；例如，如果 60 个读取请求平均等待 30 毫秒，则`read_ticks`字段将增加 60*30 = 1800。

正在进行

=========

此值计算已发送到设备驱动程序但尚未完成的 I/O 请求数量。它不包括在队列中但尚未发送到设备驱动程序的 I/O 请求。

I/O 时间

========

此值计算设备有 I/O 请求排队的毫秒数。

队列时间

=============

此值计算 I/O 请求在该块设备上等待的毫秒数。如果有多个 I/O 请求在等待，此值将随着毫秒数乘以等待的请求数量的乘积而增加（请参阅上面的“读取时间”以获取示例）。