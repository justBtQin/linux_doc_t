UEFI，即统一可扩展固件接口，是规范兼容固件接口行为的一种规范。它由 UEFI 论坛维护 - http://www.uefi.org/。

UEFI 是其前身“EFI”的演进，因此在本文件和相关源代码中，EFI 和 UEFI 这两个术语有时可以互换使用。一般来说，任何新的东西都使用“UEFI”，而“EFI”指的是遗留代码或规范。

# Linux 中的 UEFI 支持

=====================

在符合 UEFI 规范的固件的平台上启动，使得内核能够支持额外的功能：

- UEFI 运行时服务

- 通过 UEFI 配置表的标准化接口检索各种配置信息。（ACPI、SMBIOS、...）

要实际启用[U]EFI 支持，请启用：

- CONFIG_EFI=y

- CONFIG_EFI_VARS=y 或 m

该实现取决于在扁平设备树（FDT）中接收有关 UEFI 环境的信息 - 因此仅在启用 CONFIG_OF 时可用。

# UEFI 存根

=========

“存根”是一种将 Image/zImage 扩展为有效的 UEFI PE/COFF 可执行文件的功能，包括一个加载器应用程序，使得可以直接从 UEFI 外壳、启动菜单或像 Gummiboot 或 rEFInd 这样的轻量级引导加载程序加载内核。

带有存根支持构建的内核映像对于在非 UEFI 环境中启动仍然是一个有效的内核映像。

# ARM 上的 UEFI 内核支持

==========================

ARM 架构（arm 和 arm64）上的 UEFI 内核支持仅在通过存根启动时可用。

在 UEFI 模式下启动时，存根会从提供的 DT 中删除任何内存节点。取而代之的是，内核读取 UEFI 内存映射。

存根在 FDT /chosen 节点中填充（并且内核扫描）以下参数：

```
________________________________________________________________________________
名称                      | 大小   | 描述
================================================================================
linux,uefi-system-table   | 64 位  | UEFI 系统表的物理地址。
--------------------------------------------------------------------------------
linux,uefi-mmap-start     | 64 位  | UEFI 内存映射的物理地址，
                          |        | 由 UEFI GetMemoryMap()调用填充。
--------------------------------------------------------------------------------
linux,uefi-mmap-size      | 32 位  | 前面条目中指向的 UEFI 内存映射的大小（以字节为单位）。
--------------------------------------------------------------------------------
linux,uefi-mmap-desc-size | 32 位  | UEFI 内存映射中每个条目的大小（以字节为单位）。
--------------------------------------------------------------------------------
linux,uefi-mmap-desc-ver  | 32 位  | 内存映射描述符格式的版本。
--------------------------------------------------------------------------------
linux,uefi-stub-kern-ver  | 字符串 | 构建中的 linux_banner 的副本。
```

要获取详细的调试消息，请在内核命令行上指定“uefi_debug”。