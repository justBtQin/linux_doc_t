已弃用的 SWP 指令的软件模拟（CONFIG_SWP_EMULATE）

---------------------------------------------------------------------

ARMv6 架构弃用了 SWP/SWPB 指令的使用，并建议迁移到加载锁定/条件存储指令 LDREX 和 STREX。ARMv7 多处理扩展引入了禁用这些指令的能力，在执行时触发未定义指令异常。被捕获的指令使用 LDREX/STREX 或 LDREXB/STREXB 序列进行模拟。如果发生内存访问错误（中止），则向触发进程发送段错误信号。

/proc/cpu/swp_emulation 包含一些统计信息/数据，包括最后触发模拟调用的进程的 PID。例如：

---

模拟的 SWP：12

模拟的 SWPB：0

中止的 SWP{B}：1

最后进程：314

---

注意：当访问未缓存的共享区域时，LDREX/STREX 依赖于称为全局监视器的外部事务监控块来维持更新的原子性。如果你的系统未实现全局监视器，此选项可能会导致执行 SWP 操作到未缓存内存的程序死锁，因为 STREX 操作将始终失败。