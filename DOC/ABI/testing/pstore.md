位置：/sys/fs/pstore/...（或 /dev/pstore/...）

日期：2011 年 3 月

内核版本：2.6.39

联系人：tony.luck@intel.com

描述：平台相关持久存储的通用接口。

提供跨系统重启保存某些数据机制的平台可以向此驱动程序注册，以提供一个通用接口来显示在死机时刻捕获的记录。在恐慌情况下，控制台日志的最后部分会被捕获，但其他有趣的数据也可以被保存。

```
# mount -t pstore -o kmsg_bytes=8000 - /sys/fs/pstore
$ ls -l /sys/fs/pstore/
	总计 0
	-r--r--r-- 1 root root 7896 Nov 30 15:38 dmesg-erst-1
```

此接口的不同用户将导致不同的文件名前缀。目前定义了两个：

"dmesg" - 保存的控制台日志

"mce" - 来自致命硬件错误的架构相关数据

一旦读取了文件中的信息，删除该文件将向底层持久存储设备发出信号，告知其可以回收空间以供以后重新使用。

```
$ rm /sys/fs/pstore/dmesg-erst-1
```

期望 /sys/fs/pstore/中的所有文件将被保存到其他地方，并在启动后不久从持久存储中删除，以释放空间以备下次灾难。

'mkmsg_bytes' 挂载选项更改每次 oops/恐慌时保存的数据目标量。Pstore 根据底层持久存储的记录大小保存（可能是多个）文件，直到达到至少此数量。默认值为 10 Kbytes。

Pstore 一次仅支持一个后端。如果有多个后端可用，可以在启动时通过将 pstore.backend= 参数传递给内核来设置首选后端。