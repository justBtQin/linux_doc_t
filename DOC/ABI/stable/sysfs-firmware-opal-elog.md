**What**: `/sys/firmware/opal/elog`

**Date**: Feb 2014

**Contact**: Stewart Smith <stewart@linux.vnet.ibm.com>

**Description**:

此目录公开通过 OPAL 固件接口检索到的错误日志条目。

每个错误日志由一个唯一的 ID 标识，并且将一直存在，直到明确告知固件已确认。

每个日志条目在 `/sys/firmware/opal/elog` 中都有一个目录。

如果没有更多日志条目的空间，服务处理器可能会在固件检索到之前或 Linux 检索/确认之前清除日志条目。

如果 Linux 已检索到日志条目但尚未明确告知固件，并且服务处理器需要更多日志条目空间，那么日志消息的唯一剩余副本可能在 Linux 中。

通常，用户空间守护进程将监视新条目，读取它们并确认它们。

服务处理器可能能够存储比固件更多的日志条目，因此在从 Linux 确认事件后，您可能会立即从过去某个时间生成的队列中获得另一个事件。

原始日志格式是二进制格式。我们目前在内核中根本不解析此格式，而是留给用户空间来解决问题。将来，我们可能会在内核中进行更多解析，并添加更多文件，以使简单的用户空间进程更容易提取更多信息。

对于每个日志条目（目录），有以下文件：

`id`：错误日志 ID 的 ASCII 表示形式，以十六进制表示 - 例如 "0x01"。

`type`：错误日志类型 ID 的 ASCII 表示形式和类型描述。目前只是 "0x00 PEL" - 平台错误日志。将来可能会有其他类型。

`raw`：一个只读二进制文件，可以读取以获取原始日志条目。这些文件小于 16kb，通常只有几百字节，平均为 2kb。

`acknowledge`：向此文件写入 "ack" 将向固件（如果适用，也向服务处理器）确认错误日志。确认后不久，日志条目将从 sysfs 中删除。读取此文件将列出支持的操作（目前只是确认）。