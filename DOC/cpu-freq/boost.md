<markdown_document>

**Processor boosting control**

- 给用户的信息 -

心急用户快速指南：

--------------------

/sys/devices/system/cpu/cpufreq/boost 控制整个系统的提升设置。你可以读取和写入该文件，值为“0”（禁用提升）或“1”（允许提升）。读取或写入 1 并不意味着系统此时正在提升，而只是表示 CPU 可以自行提高频率。 --------------------

简介

-------------

一些 CPU 支持在某些条件下提高多核封装中某些核心的运行频率，主要是在整个芯片未充分利用且低于其预期热预算的情况下。关于启用/禁用提升的决策要么在硬件（例如 x86）中做出，要么在软件（例如 ARM）中做出。在英特尔 CPU 上，这称为“Turbo Boost”，AMD 称之为“Turbo-Core”，在技术文档中称为“核心性能提升”。在 Linux 中，为了方便我们使用“boost”一词。

禁用开关的理由

----------------------------

尽管这个想法是在没有用户干预的情况下提供更好的性能，但有时需要禁用此功能。大多数系统在（BIOS）固件中提供一个开关来完全禁用该功能，但更精细和动态的控制是理想的：

1. 在运行基准测试时，可重复的结果很重要。由于提升功能取决于整个封装的负载，单线程性能可能会有所不同。通过在至少基准测试运行期间显式禁用提升功能，系统将以固定频率运行，结果再次可重复。

2. 要检查提升功能的影响，在有和没有提升的情况下进行测试是有帮助的。

3. 提升意味着对处理器进行超频，尽管是在受控条件下。通过提高频率和电压，处理器将比不提升时消耗更多的功率，这对于移动用户来说可能是不可取的。禁用提升在这里可能会节省电力，但这取决于工作负载。

用户控制的开关

----------------------

为了允许用户切换提升功能，cpufreq 核心驱动程序导出一个 sysfs 旋钮来启用或禁用它。有一个文件：

/sys/devices/system/cpu/cpufreq/boost ，它可以读取“0”（禁用提升）或“1”（启用提升）。只有当 cpufreq 驱动程序支持提升时，才会导出该文件。显式更改权限并写入该文件将返回 EINVAL。

在支持的 CPU 上，可以将“0”或“1”写入此文件。这将在整个系统的所有核心上禁用提升功能（0），或者允许软件或硬件随意提升（1）。

写入“1”不会明确提升系统，而只是允许 CPU 自行提升。一些实现会考虑外部因素，如芯片的温度，因此一次提升并不一定意味着每次使用完全相同的软件设置时都会发生。

AMD 遗留的 cpb 开关

---------------------

AMD powernow-k8 驱动程序曾经支持一个非常相似的开关，用于禁用或启用某些 AMD CPU 的“核心性能提升”功能。此开关在每个 CPU 的 cpufreq 目录（/sys/devices/system/cpu[0-9]*/cpufreq）中实例化，称为“cpb”。尽管每个 CPU 的存在暗示了更精细的控制，但实际实现仅支持系统全局开关语义，该语义简单地反映在每个 CPU 的文件中。将 0 或 1 写入其中将使其他 CPU 进入相同状态。出于兼容性原因，此文件及其行为在 AMD CPU 上仍然受支持，尽管现在它受配置开关（X86_ACPI_CPUFREQ_CPB）保护。在英特尔 CPU 上，即使设置了配置选项，也永远不会创建此文件。此功能被视为遗留功能，将在未来的某个内核版本中删除。

更精细的提升控制

----------------------------------

从技术上讲，至少可以在每个封装的基础上切换提升功能，对于某些 CPU，甚至可以在每个核心的基础上进行切换。目前，驱动程序不支持此功能，但将来可能会实现。

</markdown_document>